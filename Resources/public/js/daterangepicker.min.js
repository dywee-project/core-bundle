// daterangepicker.js
// version : 0.0.9
// author : Chunlong Liu
// last updated at: 2015-10-30
// license : MIT
// www.jszen.com
(function (factory) {if (typeof define === 'function' && define.amd)define(['jquery', 'moment'], factory); else if (typeof exports === 'object' && typeof module !== 'undefined')module.exports = factory(require('jquery'), require('moment')); else factory(jQuery, moment);}(function ($, moment) {
	$.dateRangePickerLanguages =
	{
		'default':  //default language: English
		{
			'selected': 'Selected:',
			'day':'Day',
			'days': 'Days',
			'apply': 'Close',
			'week-1' : 'mo',
			'week-2' : 'tu',
			'week-3' : 'we',
			'week-4' : 'th',
			'week-5' : 'fr',
			'week-6' : 'sa',
			'week-7' : 'su',
			'week-number': 'W',
			'month-name': ['january','february','march','april','may','june','july','august','september','october','november','december'],
			'shortcuts' : 'Shortcuts',
			'custom-values': 'Custom Values',
			'past': 'Past',
			'following':'Following',
			'previous' : 'Previous',
			'prev-week' : 'Week',
			'prev-month' : 'Month',
			'prev-year' : 'Year',
			'next':'Next',
			'next-week':'Week',
			'next-month':'Month',
			'next-year':'Year',
			'less-than' : 'Date range should not be more than %d days',
			'more-than' : 'Date range should not be less than %d days',
			'default-more' : 'Please select a date range longer than %d days',
			'default-single' : 'Please select a date',
			'default-less' : 'Please select a date range less than %d days',
			'default-range' : 'Please select a date range between %d and %d days',
			'default-default': 'Please select a date range',
			'time':'Time',
			'hour':'Hour',
			'minute':'Minute'
		},
		'de':
		{
			'selected': 'Auswahl:',
			'day':'Tag',
			'days': 'Tage',
			'apply': 'Schließen',
			'week-1' : 'mo',
			'week-2' : 'di',
			'week-3' : 'mi',
			'week-4' : 'do',
			'week-5' : 'fr',
			'week-6' : 'sa',
			'week-7' : 'so',
			'month-name': ['januar','februar','märz','april','mai','juni','juli','august','september','oktober','november','dezember'],
			'shortcuts' : 'Schnellwahl',
			'past': 'Vorherige',
			'following':'Folgende',
			'previous' : 'Vorherige',
			'prev-week' : 'Woche',
			'prev-month' : 'Monat',
			'prev-year' : 'Jahr',
			'next':'Nächste',
			'next-week':'Woche',
			'next-month':'Monat',
			'next-year':'Jahr',
			'less-than' : 'Datumsbereich darf nicht größer sein als %d Tage',
			'more-than' : 'Datumsbereich darf nicht kleiner sein als %d Tage',
			'default-more' : 'Bitte mindestens %d Tage auswählen',
			'default-single' : 'Bitte ein Datum auswählen',
			'default-less' : 'Bitte weniger als %d Tage auswählen',
			'default-range' : 'Bitte einen Datumsbereich zwischen %d und %d Tagen auswählen',
			'default-default': 'Bitte ein Start- und Enddatum auswählen',
			'Time': 'Zeit',
			'hour': 'Stunde',
			'minute': 'Minute',
		},
		'fr':
		{
			'selected': 'Sélection:',
			'day':'Jour',
			'days': 'Jours',
			'apply': 'Fermer',
			'week-1' : 'lu',
			'week-2' : 'ma',
			'week-3' : 'me',
			'week-4' : 'je',
			'week-5' : 've',
			'week-6' : 'sa',
			'week-7' : 'di',
			'month-name': ['janvier','février','mars','avril','mai','juin','juillet','août','septembre','octobre','novembre','décembre'],
			'shortcuts' : 'Raccourcis',
			'past': 'Passé',
			'following':'Suivant',
			'previous' : 'Précédent',
			'prev-week' : 'Semaine',
			'prev-month' : 'Mois',
			'prev-year' : 'Année',
			'next':'Suivant',
			'next-week':'Semaine',
			'next-month':'Mois',
			'next-year':'Année',
			'less-than' : 'L\'intervalle ne doit pas être supérieure à %d jours',
			'more-than' : 'L\'intervalle ne doit pas être inférieure à %d jours',
			'default-more' : 'Merci de choisir une intervalle supérieure à %d jours',
			'default-single' : 'Merci de choisir une date',
			'default-less' : 'Merci de choisir une intervalle inférieure %d jours',
			'default-range' : 'Merci de choisir une intervalle comprise entre %d et %d jours',
			'default-default': 'Merci de choisir une date'
		},
		'nl':
		{
			'selected': 'Geselecteerd:',
			'day':'Dag',
			'days': 'Dagen',
			'apply': 'Ok',
			'week-1' : 'ma',
			'week-2' : 'di',
			'week-3' : 'wo',
			'week-4' : 'do',
			'week-5' : 'vr',
			'week-6' : 'za',
			'week-7' : 'zo',
			'month-name': ['januari','februari','maart','april','mei','juni','juli','augustus','september','october','november','december'],
			'shortcuts' : 'Snelkoppelingen',
			'custom-values': 'Aangepaste waarden',
			'past': 'Verleden',
			'following':'Komend',
			'previous' : 'Vorige',
			'prev-week' : 'Week',
			'prev-month' : 'Maand',
			'prev-year' : 'Jaar',
			'next':'Volgende',
			'next-week':'Week',
			'next-month':'Maand',
			'next-year':'Jaar',
			'less-than' : 'Interval moet langer dan %d dagen zijn',
			'more-than' : 'Interval mag niet minder dan %d dagen zijn',
			'default-more' : 'Selecteer een interval langer dan %dagen',
			'default-single' : 'Selecteer een datum',
			'default-less' : 'Selecteer een interval minder dan %d dagen',
			'default-range' : 'Selecteer een interval tussen %d en %d dagen',
			'default-default': 'Selecteer een interval',
			'time':'Tijd',
			'hour':'Uur',
			'minute':'Minuut'
		}
	};

	$.fn.dateRangePicker=function(t){function e(t,e){return t.target==e||void 0!=e.childNodes&&$.inArray(t.target,e.childNodes)>=0}function a(){function a(e){var a=$(e).parents("table").hasClass("month2"),n=a?t.month2:t.month1;n=R(n),!t.singleMonth&&!t.singleDate&&!a&&L(n,t.month2)>=0||A(n)||(x(n,a?"month2":"month1"),B())}function s(e){var a=R(t.month1),n=R(t.month2);A(n)||!t.singleDate&&L(a,n)>=0||(x(a,"month1"),x(n,"month2"),Y())}function r(e){var a=$(e).parents("table").hasClass("month2"),n=a?t.month2:t.month1;n=j(n),a&&L(n,t.month1)<=0||A(n)||(x(n,a?"month2":"month1"),B())}function o(e){var a=j(t.month1),n=j(t.month2);A(a)||!t.singleDate&&L(n,a)<=0||(x(n,"month2"),x(a,"month1"),Y())}var d=this;if($(this).data("date-picker-opened"))return void P();$(this).data("date-picker-opened",!0),Z=H().hide(),Z.append('<div class="date-range-length-tip"></div>'),Z.delegate(".day","mouseleave",function(){Z.find(".date-range-length-tip").hide()}),$(t.container).append(Z),t.inline?Z.addClass("inline-wrapper"):n(),t.alwaysOpen&&Z.find(".apply-btn").hide();var l=t.defaultTime?t.defaultTime:new Date;t.lookBehind?(t.startDate&&L(l,t.startDate)<0&&(l=R(moment(t.startDate).toDate())),t.endDate&&L(l,t.endDate)>0&&(l=moment(t.endDate).toDate()),x(j(l),"month1"),x(l,"month2")):(t.startDate&&L(l,t.startDate)<0&&(l=moment(t.startDate).toDate()),t.endDate&&L(R(l),t.endDate)>0&&(l=j(moment(t.endDate).toDate())),x(l,"month1"),x(R(l),"month2")),t.singleDate&&(t.startDate&&L(l,t.startDate)<0&&(l=moment(t.startDate).toDate()),t.endDate&&L(l,t.endDate)>0&&(l=moment(t.endDate).toDate()),x(l,"month1")),t.time.enabled&&(t.startDate&&t.endDate||t.start&&t.end?(I(moment(t.start||t.startDate).toDate(),"time1"),I(moment(t.end||t.endDate).toDate(),"time2")):(I(l,"time1"),I(l,"time2")));var m="";m=X(t.singleDate?"default-single":t.minDays&&t.maxDays?"default-range":t.minDays?"default-more":t.maxDays?"default-less":"default-default"),Z.find(".default-top").html(m.replace(/\%d/,t.minDays).replace(/\%d/,t.maxDays)),t.singleMonth?Z.addClass("single-month"):Z.addClass("two-months"),setTimeout(function(){i(),at=!0},0),Z.click(function(t){t.stopPropagation()}),$(document).bind("click.datepicker",function(t){e(t,d[0])||Z.is(":visible")&&P()}),Z.find(".next").click(function(){t.stickyMonths?s(this):a(this)}),Z.find(".prev").click(function(){t.stickyMonths?o(this):r(this)}),Z.delegate(".day","click",function(t){p($(this))}),Z.delegate(".day","mouseenter",function(t){y($(this))}),Z.delegate(".week-number","click",function(t){v($(this))}),Z.attr("unselectable","on").css("user-select","none").bind("selectstart",function(t){return t.preventDefault(),!1}),Z.find(".apply-btn").click(function(){P();var e=S(new Date(t.start))+t.separator+S(new Date(t.end));$(d).trigger("datepicker-apply",{value:e,date1:new Date(t.start),date2:new Date(t.end)})}),Z.find("[custom]").click(function(){var e=$(this).attr("custom");t.start=!1,t.end=!1,Z.find(".day.checked").removeClass("checked"),t.setValue.call(st,e),b(),C(!0),Y(),t.autoClose&&P()}),Z.find("[shortcut]").click(function(){var e=$(this).attr("shortcut"),a=new Date,n=!1;if(-1!=e.indexOf("day")){var s=parseInt(e.split(",",2)[1],10);n=new Date((new Date).getTime()+864e5*s),a=new Date(a.getTime()+864e5*(s>0?1:-1))}else if(-1!=e.indexOf("week")){var r=-1!=e.indexOf("prev,")?-1:1;if(1==r)var o="monday"==t.startOfWeek?1:0;else var o="monday"==t.startOfWeek?0:6;for(a=new Date(a.getTime()-864e5);a.getDay()!=o;)a=new Date(a.getTime()+864e5*r);n=new Date(a.getTime()+864e5*r*6)}else if(-1!=e.indexOf("month")){var r=-1!=e.indexOf("prev,")?-1:1;n=1==r?R(a):j(a),n.setDate(1),a=R(n),a.setDate(1),a=new Date(a.getTime()-864e5)}else if(-1!=e.indexOf("year")){var r=-1!=e.indexOf("prev,")?-1:1;n=new Date,n.setFullYear(a.getFullYear()+r),n.setMonth(0),n.setDate(1),a.setFullYear(a.getFullYear()+r),a.setMonth(11),a.setDate(31)}else if("custom"==e){var i=$(this).html();if(t.customShortcuts&&t.customShortcuts.length>0)for(var d=0;d<t.customShortcuts.length;d++){var l=t.customShortcuts[d];if(l.name==i){var m=[];m=l.dates.call(),m&&2==m.length&&(n=m[0],a=m[1]),m&&1==m.length&&(movetodate=m[0],x(movetodate,"month1"),x(R(movetodate),"month2"),B());break}}}n&&a&&(M(n,a),b())}),Z.find(".time1 input[type=range]").bind("change mousemove",function(t){var e=t.target,a="hour"==e.name?$(e).val().replace(/^(\d{1})$/,"0$1"):void 0,n="minute"==e.name?$(e).val().replace(/^(\d{1})$/,"0$1"):void 0;c("time1",a,n)}),Z.find(".time2 input[type=range]").bind("change mousemove",function(t){var e=t.target,a="hour"==e.name?$(e).val().replace(/^(\d{1})$/,"0$1"):void 0,n="minute"==e.name?$(e).val().replace(/^(\d{1})$/,"0$1"):void 0;c("time2",a,n)})}function n(){if(!t.inline){var e=$(nt).offset();if("relative"==$(t.container).css("position")){var a=$(t.container).offset();Z.css({top:e.top-a.top+$(nt).outerHeight()+4,left:e.left-a.left})}else e.left<460?Z.css({top:e.top+$(nt).outerHeight()+parseInt($("body").css("border-top")||0,10),left:e.left}):Z.css({top:e.top+$(nt).outerHeight()+parseInt($("body").css("border-top")||0,10),left:e.left+$(nt).width()-Z.width()-16})}}function s(){return Z}function r(t){n(),o(),Z.slideDown(t,function(){$(nt).trigger("datepicker-opened",{relatedTarget:Z})}),$(nt).trigger("datepicker-open",{relatedTarget:Z}),B(),i()}function o(){var e=t.getValue.call(st),a=e?e.split(t.separator):"";if(a&&(1==a.length&&t.singleDate||a.length>=2)){var n=t.format;n.match(/Do/)&&(n=n.replace(/Do/,"D"),a[0]=a[0].replace(/(\d+)(th|nd|st)/,"$1"),a.length>=2&&(a[1]=a[1].replace(/(\d+)(th|nd|st)/,"$1"))),at=!1,a.length>=2?M(moment(a[0],n,moment.locale(t.language)).toDate(),moment(a[1],n,moment.locale(t.language)).toDate()):1==a.length&&t.singleDate&&T(moment(a[0],n,moment.locale(t.language)).toDate()),at=!0}}function i(){var t=Z.find(".gap").css("margin-left");t&&(t=parseInt(t));var e=Z.find(".month1").width(),a=Z.find(".gap").width()+(t?2*t:0),n=Z.find(".month2").width();Z.find(".month-wrapper").width(e+a+n)}function d(t,e){Z.find("."+t+" input[type=range].hour-range").val(moment(e).hours()),Z.find("."+t+" input[type=range].minute-range").val(moment(e).minutes()),c(t,moment(e).format("HH"),moment(e).format("mm"))}function l(e,a){t[e]=parseInt(moment(parseInt(a)).startOf("day").add(moment(t[e+"Time"]).format("HH"),"h").add(moment(t[e+"Time"]).format("mm"),"m").valueOf())}function m(){d("time1",t.start),d("time2",t.end)}function c(e,a,n){function s(e,s){var r=s.format("HH"),o=s.format("mm");t[e]=s.startOf("day").add(a||r,"h").add(n||o,"m").valueOf()}switch(a&&Z.find("."+e+" .hour-val").text(a),n&&Z.find("."+e+" .minute-val").text(n),e){case"time1":t.start&&s("start",moment(t.start)),s("startTime",moment(t.startTime||moment().valueOf()));break;case"time2":t.end&&s("end",moment(t.end)),s("endTime",moment(t.endTime||moment().valueOf()))}b(),C(),Y()}function h(){t.start=!1,t.end=!1,Z.find(".day.checked").removeClass("checked"),Z.find(".day.last-date-selected").removeClass("last-date-selected"),Z.find(".day.first-date-selected").removeClass("first-date-selected"),t.setValue.call(st,""),b(),C(),Y()}function f(e){var a=e;return"week-range"===t.batchMode?a="monday"===t.startOfWeek?moment(parseInt(e)).startOf("isoweek").valueOf():moment(parseInt(e)).startOf("week").valueOf():"month-range"===t.batchMode&&(a=moment(parseInt(e)).startOf("month").valueOf()),a}function u(e){var a=e;return"week-range"===t.batchMode?a="monday"===t.startOfWeek?moment(parseInt(e)).endOf("isoweek").valueOf():moment(parseInt(e)).endOf("week").valueOf():"month"===t.batchMode&&(a=moment(parseInt(e)).endOf("month").valueOf()),a}function p(e){if(!e.hasClass("invalid")){var a=e.attr("time");if(e.addClass("checked"),t.singleDate?(t.start=a,t.end=!1):"week"===t.batchMode?"monday"===t.startOfWeek?(t.start=moment(parseInt(a)).startOf("isoweek").valueOf(),t.end=moment(parseInt(a)).endOf("isoweek").valueOf()):(t.end=moment(parseInt(a)).endOf("week").valueOf(),t.start=moment(parseInt(a)).startOf("week").valueOf()):"workweek"===t.batchMode?(t.start=moment(parseInt(a)).day(1).valueOf(),t.end=moment(parseInt(a)).day(5).valueOf()):"weekend"===t.batchMode?(t.start=moment(parseInt(a)).day(6).valueOf(),t.end=moment(parseInt(a)).day(7).valueOf()):"month"===t.batchMode?(t.start=moment(parseInt(a)).startOf("month").valueOf(),t.end=moment(parseInt(a)).endOf("month").valueOf()):t.start&&t.end||!t.start&&!t.end?(t.start=f(a),t.end=!1):t.start&&(t.end=u(a),t.time.enabled&&l("end",t.end)),t.time.enabled&&(t.start&&l("start",t.start),t.end&&l("end",t.end)),!t.singleDate&&t.start&&t.end&&t.start>t.end){var n=t.end;t.end=u(t.start),t.start=f(n),t.time.enabled&&t.swapTime&&m()}t.start=parseInt(t.start),t.end=parseInt(t.end),k(),t.start&&!t.end&&($(nt).trigger("datepicker-first-date-selected",{date1:new Date(t.start)}),y(e)),D(a),b(),C(),Y(),w()}}function v(e){var a=parseInt(e.attr("data-start-time"),10);if(t.startWeek){Z.find(".week-number-selected").removeClass("week-number-selected");var n=new Date(a<t.startWeek?a:t.startWeek),s=new Date(a<t.startWeek?t.startWeek:a);t.startWeek=!1,t.start=moment(n).day("monday"==t.startOfWeek?1:0).toDate(),t.end=moment(s).day("monday"==t.startOfWeek?7:6).toDate()}else{t.startWeek=a,e.addClass("week-number-selected");var n=new Date(a);t.start=moment(n).day("monday"==t.startOfWeek?1:0).toDate(),t.end=moment(n).day("monday"==t.startOfWeek?7:6).toDate()}D(),b(),C(),Y(),w()}function g(e){if(e=parseInt(e,10),t.startDate&&V(e,t.startDate)<0)return!1;if(t.endDate&&V(e,t.endDate)>0)return!1;if(t.start&&!t.end&&!t.singleDate){if(t.maxDays>0&&O(e,t.start)>t.maxDays)return!1;if(t.minDays>0&&O(e,t.start)<t.minDays)return!1;if(t.selectForward&&e<t.start)return!1;if(t.selectBackward&&e>t.start)return!1;if(t.beforeShowDay&&"function"==typeof t.beforeShowDay){for(var a=!0,n=e;O(n,t.start)>1;){var s=t.beforeShowDay(new Date(n));if(!s[0]){a=!1;break}n>t.start&&(n-=864e5),n<t.start&&(n+=864e5)}if(!a)return!1}}return!0}function D(){return Z.find(".day.invalid.tmp").removeClass("tmp invalid").addClass("valid"),t.start&&!t.end&&Z.find(".day.toMonth.valid").each(function(){var t=parseInt($(this).attr("time"),10);g(t)?$(this).addClass("valid tmp").removeClass("invalid"):$(this).addClass("invalid tmp").removeClass("valid")}),!0}function y(e){var a=parseInt(e.attr("time")),n="";if(e.hasClass("has-tooltip")&&e.attr("data-tooltip"))n='<span style="white-space:nowrap">'+e.attr("data-tooltip")+"</span>";else if(!e.hasClass("invalid"))if(t.singleDate)Z.find(".day.hovering").removeClass("hovering"),e.addClass("hovering");else if(Z.find(".day").each(function(){var e=parseInt($(this).attr("time"));t.start,t.end;e==a?$(this).addClass("hovering"):$(this).removeClass("hovering"),t.start&&!t.end&&(t.start<e&&a>=e||t.start>e&&e>=a)?$(this).addClass("hovering"):$(this).removeClass("hovering")}),t.start&&!t.end){var s=O(a,t.start);t.hoveringTooltip&&("function"==typeof t.hoveringTooltip?n=t.hoveringTooltip(s,t.start,a):t.hoveringTooltip===!0&&s>1&&(n=s+" "+X("days")))}if(n){var r=e.offset(),o=Z.offset(),i=r.left-o.left,d=r.top-o.top;i+=e.width()/2;var l=Z.find(".date-range-length-tip"),m=l.css({visibility:"hidden",display:"none"}).html(n).width(),c=l.height();i-=m/2,d-=c,setTimeout(function(){l.css({left:i,top:d,display:"block",visibility:"visible"})},10)}else Z.find(".date-range-length-tip").hide()}function k(){Z.find(".day.hovering").removeClass("hovering"),Z.find(".date-range-length-tip").hide()}function w(){t.singleDate===!0?at&&t.start&&t.autoClose&&P():at&&t.start&&t.end&&t.autoClose&&P()}function b(){var e=Math.ceil((t.end-t.start)/864e5)+1;t.singleDate?t.start&&!t.end?Z.find(".drp_top-bar").removeClass("error").addClass("normal"):Z.find(".drp_top-bar").removeClass("error").removeClass("normal"):t.maxDays&&e>t.maxDays?(t.start=!1,t.end=!1,Z.find(".day").removeClass("checked"),Z.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(X("less-than").replace("%d",t.maxDays))):t.minDays&&e<t.minDays?(t.start=!1,t.end=!1,Z.find(".day").removeClass("checked"),Z.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(X("more-than").replace("%d",t.minDays))):t.start||t.end?Z.find(".drp_top-bar").removeClass("error").addClass("normal"):Z.find(".drp_top-bar").removeClass("error").removeClass("normal"),t.singleDate&&t.start&&!t.end||!t.singleDate&&t.start&&t.end?Z.find(".apply-btn").removeClass("disabled"):Z.find(".apply-btn").addClass("disabled"),t.batchMode&&(t.start&&t.startDate&&V(t.start,t.startDate)<0||t.end&&t.endDate&&V(t.end,t.endDate)>0)&&(t.start=!1,t.end=!1,Z.find(".day").removeClass("checked"))}function C(e,a){if(Z.find(".start-day").html("..."),Z.find(".end-day").html("..."),Z.find(".selected-days").hide(),t.start&&Z.find(".start-day").html(S(new Date(parseInt(t.start)))),t.end&&Z.find(".end-day").html(S(new Date(parseInt(t.end)))),t.start&&t.singleDate){Z.find(".apply-btn").removeClass("disabled");var n=S(new Date(t.start));t.setValue.call(st,n,S(new Date(t.start)),S(new Date(t.end))),at&&!a&&$(nt).trigger("datepicker-change",{value:n,date1:new Date(t.start)})}else if(t.start&&t.end){Z.find(".selected-days").show().find(".selected-days-num").html(O(t.end,t.start)),Z.find(".apply-btn").removeClass("disabled");var n=S(new Date(t.start))+t.separator+S(new Date(t.end));t.setValue.call(st,n,S(new Date(t.start)),S(new Date(t.end))),at&&!a&&$(nt).trigger("datepicker-change",{value:n,date1:new Date(t.start),date2:new Date(t.end)})}else e?Z.find(".apply-btn").removeClass("disabled"):Z.find(".apply-btn").addClass("disabled")}function O(t,e){return Math.abs(q(t)-q(e))+1}function M(e,a,n){if(e.getTime()>a.getTime()){var s=a;a=e,e=s,s=null}var r=!0;return t.startDate&&V(e,t.startDate)<0&&(r=!1),t.endDate&&V(a,t.endDate)>0&&(r=!1),r?(t.start=e.getTime(),t.end=a.getTime(),t.time.enabled&&(d("time1",e),d("time2",a)),(t.stickyMonths||V(e,a)>0&&0==L(e,a))&&(t.lookBehind?e=j(a):a=R(e)),t.stickyMonths&&L(a,t.endDate)>0&&(e=j(e),a=j(a)),t.stickyMonths||0==L(e,a)&&(t.lookBehind?e=j(a):a=R(e)),x(e,"month1"),x(a,"month2"),B(),b(),C(!1,n),void w()):(x(t.startDate,"month1"),x(R(t.startDate),"month2"),void B())}function T(e){var a=!0;return t.startDate&&V(e,t.startDate)<0&&(a=!1),t.endDate&&V(e,t.endDate)>0&&(a=!1),a?(t.start=e.getTime(),t.time.enabled&&d("time1",e),x(e,"month1"),B(),C(),void w()):void x(t.startDate,"month1")}function Y(){(t.start||t.end)&&(Z.find(".day").each(function(){var e=parseInt($(this).attr("time")),a=t.start,n=t.end;t.time.enabled&&(e=moment(e).startOf("day").valueOf(),a=moment(a||moment().valueOf()).startOf("day").valueOf(),n=moment(n||moment().valueOf()).startOf("day").valueOf()),t.start&&t.end&&n>=e&&e>=a||t.start&&!t.end&&moment(a).format("YYYY-MM-DD")==moment(e).format("YYYY-MM-DD")?$(this).addClass("checked"):$(this).removeClass("checked"),t.start&&moment(a).format("YYYY-MM-DD")==moment(e).format("YYYY-MM-DD")?$(this).addClass("first-date-selected"):$(this).removeClass("first-date-selected"),t.end&&moment(n).format("YYYY-MM-DD")==moment(e).format("YYYY-MM-DD")?$(this).addClass("last-date-selected"):$(this).removeClass("last-date-selected")}),Z.find(".week-number").each(function(){$(this).attr("data-start-time")==t.startWeek&&$(this).addClass("week-number-selected")}))}function x(e,a){e=moment(e).toDate();var n=W(e.getMonth());Z.find("."+a+" .month-name").html(n+" "+e.getFullYear()),Z.find("."+a+" tbody").html(G(e)),t[a]=e,D()}function I(t,e){Z.find("."+e).append(F()),d(e,t)}function W(t){return X("month-name")[t]}function S(e){return moment(e).format(t.format)}function B(){Y();var e=parseInt(moment(t.month1).format("YYYYMM")),a=parseInt(moment(t.month2).format("YYYYMM")),n=Math.abs(e-a),s=n>1&&89!=n;s?Z.addClass("has-gap").removeClass("no-gap").find(".gap").css("visibility","visible"):Z.removeClass("has-gap").addClass("no-gap").find(".gap").css("visibility","hidden");var r=Z.find("table.month1").height(),o=Z.find("table.month2").height();Z.find(".gap").height(Math.max(r,o)+10)}function P(){t.alwaysOpen||($(Z).slideUp(t.duration,function(){$(nt).data("date-picker-opened",!1),$(nt).trigger("datepicker-closed",{relatedTarget:Z})}),$(nt).trigger("datepicker-close",{relatedTarget:Z}))}function L(t,e){var a=parseInt(moment(t).format("YYYYMM"))-parseInt(moment(e).format("YYYYMM"));return a>0?1:0==a?0:-1}function V(t,e){var a=parseInt(moment(t).format("YYYYMMDD"))-parseInt(moment(e).format("YYYYMMDD"));return a>0?1:0==a?0:-1}function R(t){return moment(t).add(1,"months").toDate()}function j(t){return moment(t).add(-1,"months").toDate()}function F(){return"<div>						<span>"+X("Time")+': <span class="hour-val">00</span>:<span class="minute-val">00</span></span>					</div>					<div class="hour">						<label>'+X("Hour")+': <input type="range" class="hour-range" name="hour" min="0" max="23"></label>					</div>					<div class="minute">						<label>'+X("Minute")+': <input type="range" class="minute-range" name="minute" min="0" max="59"></label>					</div>'}function H(){var e='<div class="date-picker-wrapper';t.extraClass&&(e+=" "+t.extraClass+" "),t.singleDate&&(e+=" single-date "),t.showShortcuts||(e+=" no-shortcuts "),t.showTopbar||(e+=" no-topbar "),t.customTopBar&&(e+=" custom-topbar "),e+='">',t.showTopbar&&(e+='<div class="drp_top-bar">',t.customTopBar?("function"==typeof t.customTopBar&&(t.customTopBar=t.customTopBar()),e+='<div class="custom-top">'+t.customTopBar+"</div>"):(e+='<div class="normal-top">							<span style="color:#333">'+X("selected")+' </span> <b class="start-day">...</b>',t.singleDate||(e+=' <span class="separator-day">'+t.separator+'</span> <b class="end-day">...</b> <i class="selected-days">(<span class="selected-days-num">3</span> '+X("days")+")</i>"),e+="</div>",e+='<div class="error-top">error</div>						<div class="default-top">default</div>'),e+='<input type="button" class="apply-btn disabled'+N()+'" value="'+X("apply")+'" />',e+="</div>");var a=t.showWeekNumbers?6:5;if(e+='<div class="month-wrapper"><table class="month1" cellspacing="0" border="0" cellpadding="0"><thead><tr class="caption"><th style="width:27px;"><span class="prev">&lt;</span></th><th colspan="'+a+'" class="month-name"></th><th style="width:27px;">'+(t.singleDate||!t.stickyMonths?'<span class="next">&gt;</span>':"")+'</th></tr><tr class="week-name">'+_()+"</thead><tbody></tbody></table>",Q()&&(e+='<div class="gap">'+z()+'</div><table class="month2" cellspacing="0" border="0" cellpadding="0"><thead><tr class="caption"><th style="width:27px;">'+(t.stickyMonths?"":'<span class="prev">&lt;</span>')+'</th><th colspan="'+a+'" class="month-name"></th><th style="width:27px;"><span class="next">&gt;</span></th></tr><tr class="week-name">'+_()+"</thead><tbody></tbody></table>"),e+='<div style="clear:both;height:0;font-size:0;"></div><div class="time"><div class="time1"></div>',t.singleDate||(e+='<div class="time2"></div>'),e+='</div><div style="clear:both;height:0;font-size:0;"></div></div>',e+='<div class="footer">',t.showShortcuts){e+='<div class="shortcuts"><b>'+X("shortcuts")+"</b>";var n=t.shortcuts;if(n){if(n["prev-days"]&&n["prev-days"].length>0){e+='&nbsp;<span class="prev-days">'+X("past");for(var s=0;s<n["prev-days"].length;s++){var r=n["prev-days"][s];r+=X(n["prev-days"][s]>1?"days":"day"),e+=' <a href="javascript:;" shortcut="day,-'+n["prev-days"][s]+'">'+r+"</a>"}e+="</span>"}if(n["next-days"]&&n["next-days"].length>0){e+='&nbsp;<span class="next-days">'+X("following");for(var s=0;s<n["next-days"].length;s++){var r=n["next-days"][s];r+=X(n["next-days"][s]>1?"days":"day"),e+=' <a href="javascript:;" shortcut="day,'+n["next-days"][s]+'">'+r+"</a>"}e+="</span>"}if(n.prev&&n.prev.length>0){e+='&nbsp;<span class="prev-buttons">'+X("previous");for(var s=0;s<n.prev.length;s++){var r=X("prev-"+n.prev[s]);e+=' <a href="javascript:;" shortcut="prev,'+n.prev[s]+'">'+r+"</a>"}e+="</span>"}if(n.next&&n.next.length>0){e+='&nbsp;<span class="next-buttons">'+X("next");for(var s=0;s<n.next.length;s++){var r=X("next-"+n.next[s]);e+=' <a href="javascript:;" shortcut="next,'+n.next[s]+'">'+r+"</a>"}e+="</span>"}}if(t.customShortcuts)for(var s=0;s<t.customShortcuts.length;s++){var o=t.customShortcuts[s];e+='&nbsp;<span class="custom-shortcut"><a href="javascript:;" shortcut="custom">'+o.name+"</a></span>"}e+="</div>"}if(t.showCustomValues&&(e+='<div class="customValues"><b>'+(t.customValueLabel||X("custom-values"))+"</b>",t.customValues))for(var s=0;s<t.customValues.length;s++){var i=t.customValues[s];e+='&nbsp;<span class="custom-value"><a href="javascript:;" custom="'+i.value+'">'+i.name+"</a></span>"}return e+="</div></div>",$(e)}function N(){var e="";return t.autoClose===!0&&(e+=" hide"),""!==t.applyBtnClass&&(e+=" "+t.applyBtnClass),e}function _(){var e=t.showWeekNumbers?"<th>"+X("week-number")+"</th>":"";return"monday"==t.startOfWeek?e+"<th>"+X("week-1")+"</th>					<th>"+X("week-2")+"</th>					<th>"+X("week-3")+"</th>					<th>"+X("week-4")+"</th>					<th>"+X("week-5")+"</th>					<th>"+X("week-6")+"</th>					<th>"+X("week-7")+"</th>":e+"<th>"+X("week-7")+"</th>					<th>"+X("week-1")+"</th>					<th>"+X("week-2")+"</th>					<th>"+X("week-3")+"</th>					<th>"+X("week-4")+"</th>					<th>"+X("week-5")+"</th>					<th>"+X("week-6")+"</th>"}function A(e){var e=moment(e);return t.startDate&&e.endOf("month").isBefore(t.startDate)?!0:t.endDate&&e.startOf("month").isAfter(t.endDate)?!0:!1}function z(){for(var t=['<div class="gap-top-mask"></div><div class="gap-bottom-mask"></div><div class="gap-lines">'],e=0;20>e;e++)t.push('<div class="gap-line">					<div class="gap-1"></div>					<div class="gap-2"></div>					<div class="gap-3"></div>				</div>');return t.push("</div>"),t.join("")}function Q(){return!t.singleDate&&!t.singleMonth}function U(t,e,a){var n=jQuery.extend(!0,{},t);jQuery.each(e,function(t,e){var s=e(a);for(var r in s)n.hasOwnProperty(r)?n[r]+=s[r]:n[r]=s[r]});var s="";for(var r in n)n.hasOwnProperty(r)&&(s+=r+'="'+n[r]+'" ');return s}function q(t){return Math.floor(E(t)/864e5)}function E(e){return moment.isMoment(e)&&(e=e.toDate().getTime()),"object"==typeof e&&e.getTime&&(e=e.getTime()),"string"!=typeof e||e.match(/\d{13}/)||(e=moment(e,t.format).toDate().getTime()),e=parseInt(e,10)-60*(new Date).getTimezoneOffset()*1e3}function G(e){var a=[];e.setDate(1);var n=(new Date(e.getTime()-864e5),new Date),s=e.getDay();if(0==s&&"monday"==t.startOfWeek&&(s=7),s>0)for(var r=s;r>0;r--){var o=new Date(e.getTime()-864e5*r),i=g(o.getTime());t.startDate&&V(o,t.startDate)<0&&(i=!1),t.endDate&&V(o,t.endDate)>0&&(i=!1),a.push({date:o,type:"lastMonth",day:o.getDate(),time:o.getTime(),valid:i})}for(var d=e.getMonth(),r=0;40>r;r++){var l=moment(e).add(r,"days").toDate(),i=g(l.getTime());t.startDate&&V(l,t.startDate)<0&&(i=!1),t.endDate&&V(l,t.endDate)>0&&(i=!1),a.push({date:l,type:l.getMonth()==d?"toMonth":"nextMonth",day:l.getDate(),time:l.getTime(),valid:i})}for(var m=[],c=0;6>c&&"nextMonth"!=a[7*c].type;c++){m.push("<tr>");for(var o=0;7>o;o++){var h="monday"==t.startOfWeek?o+1:o,l=a[7*c+h],f=moment(l.time).format("L")==moment(n).format("L");if(l.extraClass="",l.tooltip="",l.valid&&t.beforeShowDay&&"function"==typeof t.beforeShowDay){var u=t.beforeShowDay(moment(l.time).toDate());l.valid=u[0],l.extraClass=u[1]||"",l.tooltip=u[2]||"",""!=l.tooltip&&(l.extraClass+=" has-tooltip ")}var p={time:l.time,"data-tooltip":l.tooltip,"class":"day "+l.type+" "+l.extraClass+" "+(l.valid?"valid":"invalid")+" "+(f?"real-today":"")};0==o&&t.showWeekNumbers&&m.push('<td><div class="week-number" data-start-time="'+l.time+'">'+t.getWeekNumber(l.date)+"</div></td>"),m.push("<td "+U({},t.dayTdAttrs,l)+"><div "+U(p,t.dayDivAttrs,l)+">"+J(l.time,l.day)+"</div></td>")}m.push("</tr>")}return m.join("")}function J(e,a){return t.showDateFilter&&"function"==typeof t.showDateFilter?t.showDateFilter(e,a):a}function K(){if("auto"==t.language){var e=navigator.language?navigator.language:navigator.browserLanguage;if(!e)return $.dateRangePickerLanguages["default"];var e=e.toLowerCase();for(var a in $.dateRangePickerLanguages)if(-1!=e.indexOf(a))return $.dateRangePickerLanguages[a];return $.dateRangePickerLanguages["default"]}return t.language&&t.language in $.dateRangePickerLanguages?$.dateRangePickerLanguages[t.language]:$.dateRangePickerLanguages["default"]}function X(t){var e=t.toLowerCase(),a=t in et?et[t]:e in et?et[e]:null,n=$.dateRangePickerLanguages["default"];return null==a&&(a=t in n?n[t]:e in n?n[e]:""),a}t||(t={}),t=$.extend(!0,{autoClose:!1,format:"YYYY-MM-DD",separator:" to ",language:"auto",startOfWeek:"sunday",getValue:function(){return $(this).val()},setValue:function(t){$(this).attr("readonly")||$(this).is(":disabled")||t==$(this).val()||$(this).val(t)},startDate:!1,endDate:!1,time:{enabled:!1},minDays:0,maxDays:0,showShortcuts:!1,shortcuts:{},customShortcuts:[],inline:!1,container:"body",alwaysOpen:!1,singleDate:!1,lookBehind:!1,batchMode:!1,duration:200,stickyMonths:!1,dayDivAttrs:[],dayTdAttrs:[],selectForward:!1,selectBackward:!1,applyBtnClass:"",singleMonth:"auto",hoveringTooltip:function(t,e,a){return t>1?t+" "+X("days"):""},showTopbar:!0,swapTime:!1,showWeekNumbers:!1,getWeekNumber:function(t){return moment(t).format("w")}},t),t.start=!1,t.end=!1,t.startWeek=!1,t.isTouchDevice="ontouchstart"in window||navigator.msMaxTouchPoints,t.isTouchDevice&&(t.hoveringTooltip=!1),"auto"==t.singleMonth&&(t.singleMonth=$(window).width()<480),t.singleMonth&&(t.stickyMonths=!1),t.singleDate&&(t.singleMonth=!0),t.showTopbar||(t.autoClose=!0),t.startDate&&"string"==typeof t.startDate&&(t.startDate=moment(t.startDate,t.format).toDate()),t.endDate&&"string"==typeof t.endDate&&(t.endDate=moment(t.endDate,t.format).toDate());var Z,tt,et=K(),at=!1,nt=this,st=$(nt).get(0);return $(this).unbind(".datepicker").bind("click.datepicker",function(e){var a=Z.is(":visible");a||r(t.duration)}).bind("change.datepicker",function(t){o()}).bind("keyup.datepicker",function(){try{clearTimeout(tt)}catch(t){}tt=setTimeout(function(){o()},2e3)}),a.call(this),t.alwaysOpen&&r(0),$(this).data("dateRangePicker",{setDateRange:function(e,a,n){"string"==typeof e&&"string"==typeof a&&(e=moment(e,t.format).toDate(),a=moment(a,t.format).toDate()),M(e,a,n)},clear:h,close:P,open:r,getDatePicker:s,destroy:function(){$(nt).unbind(".datepicker"),$(nt).data("dateRangePicker",""),$(nt).data("date-picker-opened",null),Z.remove(),$(window).unbind("resize.datepicker",n),$(document).unbind("click.datepicker",P)}}),$(window).bind("resize.datepicker",n),this};
}));
